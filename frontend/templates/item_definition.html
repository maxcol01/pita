{% extends "layout.html"%}

{% block page_css %}
    <link rel="stylesheet" href="/static/css/item_definition.css"/>
{% endblock %}

{% block content %}
    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash-message {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- This div defines the layout of the item card and dynamically allows for an empty definition (we add an item) or filled definition (we want to edit the item) -->
    <div class="item-title"> Manage your items</div>
    <form action="{{ url_for('edit_item', item_id=items_info[0].item_id) if items_info else url_for('add_item') }}" method="post">
        <div class="item-definition-main-container">
            <!--Name-->
            <label for="name">Item name:</label><br>
            <input type="text" id="name" name="name" value="{{items_info[0].name if items_info else ''}}"><br>
            <!--Category-->
            <label for="category">Select Category:</label><br>
            <select id="category" name="category">
                {% for category in categories %}
                    {% if items_info and category == items_info[0].category%}
                        <option value="{{items_info[0].category}}" selected>{{items_info[0].category}}</option>
                    {% endif %}
                    <option value="{{category}}" >{{category}}</option>
                {% endfor %}
            </select><br>
            <!--Quantity-->
            <label for="quantity">Quantity:</label><br>
            <input type="number" id="quantity" name="quantity" value="{{items_info[0].quantity if items_info else ''}}"><br>
            <!--Unit-->
            <label for="unit">Units:</label><br>
            <input type="text" id="unit" name="unit" value="{{items_info[0].unit if items_info else ''}}"><br>
            <!--Exp. date-->
            <label for="exp-date">Expiration date:</label><br>
            <input type="date" id="exp-date" name="exp-date" value="{{items_info[0].expiration_date if items_info else ''}}"><br>
            <!--Location-->
            <label for="location">Location:</label><br>
            <select name="location" id="location"><br>
                {% if items_info[0] %}
                    <option value="{{items_info[0].location}}" selected>{{items_info[0].location}}</option>
                {% endif %}
                <option value="Fridge">Fridge</option>
                <option value="Pantry">Pantry</option>
                <option value="Freezer">Freezer</option>
            </select>

        </div>
        <!-- The button dynamically changes in value depending on whether we add or edit an item-->
        <button type="submit">
            {% if items_info %}
                Edit item
            {% else %}
                Add item
            {% endif %}
        </button>

    </form>

{% endblock %}
